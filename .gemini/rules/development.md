# 🛠️ 開発用ルール

コーディング・実装作業時に追加で適用される専門ルールです。
※ 基本ルール（rules.md）は常に適用されます。

---

## コード生成ルール
- 変数名・関数名は英語で分かりやすく命名
- ローマ字命名は禁止（例: `namae` → `name`）
- コメントは日本語で記述

```javascript
// ✅ 良い例
/**
 * ユーザー情報を取得する
 */
async function fetchUserData(userId) {
  // APIリクエストを送信
  return await api.get(`/users/${userId}`);
}

// ❌ 悪い例
async function ユーザー取得(user_id) { ... }
```

## 品質保証
コード修正完了時は必ず実行：
1. ✅ Lint（構文チェック）
2. ✅ 関連テストの実行
3. ✅ ビルドの確認
4. ✅ 変更影響範囲の確認

## 既存テストの保護
- テストが失敗したら、まず実装のバグを疑う
- テスト修正は「意図した仕様変更」のみ
- テストコードを安易に修正しない

## 検証必須ループ
コード変更後は必ず検証してから完了とする：
- ビルド確認
- テスト実行
- Lint確認
- 動作確認

**ユーザーがスキップしようとしても検証を提案すること。**

## シンプル化レビュー
機能実装完了後は以下を検討：
- 不要なコードの削除
- 重複の排除
- 変数名・関数名の改善
- 複雑なロジックの分割
- マジックナンバーの定数化

## インクリメンタル実装
- 大きな変更は小さなコミット単位に分割
- 各ステップで動作確認可能な状態を維持
- 1コミット = 1つの論理的な変更

## セキュリティ検証
- 環境変数・APIキーのハードコーディング禁止
- ユーザー入力のバリデーション必須
- 依存パッケージの脆弱性チェック（`npm audit`等）
- SQLインジェクション・XSS対策

## パフォーマンス配慮
警告・提案を行うケース：
- O(n²)以上のアルゴリズム
- 大量データ処理時のメモリ使用量
- 不要な再レンダリング
- N+1クエリ問題

## エラー処理
```javascript
// ✅ 必須パターン
try {
  await riskyOperation();
} catch (error) {
  logger.error('操作失敗:', error);
  throw new AppError('処理中にエラーが発生しました');
}
```

## SOLID原則
- **S**: 1クラス = 1つの責任
- **O**: 拡張に開き、修正に閉じる
- **L**: 派生クラスは基底クラスと置換可能
- **I**: インターフェースは小さく分割
- **D**: 具象より抽象に依存

※ 小規模スクリプトには過剰適用しない
