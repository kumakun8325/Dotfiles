# CRITICAL PROTOCOLS (最優先ルール - 全プロジェクト共通)

以下のルールは、いかなる状況でも最優先で遵守すること。

---

## 1. ブランチ強制
コードを変更する前には必ず `git branch` を確認し、作業用ブランチを作成すること。
- `main`・`master`・`develop` での直接作業は禁止

## 2. 日本語化
ユーザーに提示するすべての成果物は日本語で記述すること：
- 計画書・タスク・確認事項
- コミットメッセージ
- コード内のコメント
- ドキュメント

※ システムエラーやログの引用は原文のままでよい

## 3. 品質保証
コード修正完了時は、必ず以下を実行してからユーザーへ報告すること：
- Lint（構文チェック）の実行
- 関連テストの実行
- ビルドの確認（該当する場合）

## 4. 既存テストの保護
修正により既存のテストが失敗した場合：
1. テストコードを安易に修正してはならない
2. まず実装のバグを疑う
3. テスト修正が必要な場合は、「意図した仕様変更」であることをユーザーに確認

## 5. 機密情報の保護
以下を出力しないこと：
- パスワード
- APIキー
- トークン
- `.env` ファイルの内容

## 6. ドキュメントの同期
機能や仕様を変更した際は、関連するドキュメントも必ず同期して更新すること：
- README
- API仕様書
- 主要なコメント

## 7. 自動化の限界と報告
以下の場合は、執拗に再試行せず、直ちにユーザーに状況を報告すること：
- ツール実行が複数回失敗した場合
- 権限不足の問題
- 環境固有の問題

## 8. 不要リソースの削除
テストなどで作成した以下のリソースは不要になった時点で削除すること：
- 一時ファイル
- テスト用ブランチ

## 9. 作業中断時のロールバック
エラーや中断によりタスクを終了する場合：
- ユーザーの明示的な指示がない限り、修正途中の不安定な状態を残さない
- 作業開始前のクリーンな状態に復元することを提案

---

*このルールは Zenn記事 (https://zenn.dev/ken1141/articles/4a8810343e5c07) を参考に作成*
*Dotfilesリポジトリで管理: https://github.com/kumakun8325/Dotfiles*
