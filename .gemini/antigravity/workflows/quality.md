---
description: コード品質改善（シンプル化・リファクタリング）
---

# ✨ コード品質改善

コードのシンプル化とリファクタリングを管理します。

## 使い方

```
/quality simplify → コード完成後のシンプル化
/quality refactor → 段階的なリファクタリング
```

※ 検証は `/verify` を使用してください

---

## /quality simplify

機能実装完了後、コードをシンプル化してから完了とする。

### 1. 変更ファイルの確認
```bash
git diff --name-only
```

### 2. コードレビュー観点

#### 読みやすさ
- [ ] 変数名・関数名は意図が明確か？
- [ ] 不要なコメントはないか？
- [ ] 複雑なロジックには適切なコメントがあるか？

#### シンプルさ
- [ ] 重複コードはないか？
- [ ] 不要なコードは削除されているか？
- [ ] 関数は1つのことに集中しているか？

#### 保守性
- [ ] マジックナンバーは定数化されているか？
- [ ] エラーハンドリングは適切か？

### 3. リファクタリング実施
- 不要なコードの削除
- 変数名・関数名の改善
- 重複の排除

### 4. 再検証
リファクタリング後は `/verify` を実行

---

## /quality refactor

既存のテストを維持しながら、コードの品質を段階的に改善する。

### 前提条件チェック

// turbo
```bash
git branch
npm test
```
- ⚠️ `main`/`master`/`develop` での作業は禁止
- ✅ 全テストがパスしていることを確認

### リファクタリング手順

#### 1. 対象の特定
```markdown
## リファクタリング計画

### 対象
- [ファイル/関数/クラス名]

### 問題点
- [現状の問題点]

### 改善方針
- [どのように改善するか]
```

#### 2. ユーザー承認
計画についてユーザーの承認を得る

#### 3. 段階的実施
1回のコミットで1つの論理的な変更：
- 変更を実施 → テスト実行 → コミット

#### 4. 各ステップ後の検証
// turbo
```bash
npm test
npm run lint
npm run build
```

---

## チェックリスト

### コード品質
- [ ] 重複コードを排除した
- [ ] 関数は単一責任になっている
- [ ] 変数名・関数名が意図を表している
- [ ] マジックナンバーを定数化した

### 安全性
- [ ] すべてのテストがパスしている
- [ ] 既存の動作を変更していない

---

## ⚠️ 注意事項

- **テストが失敗したら、すぐに前のステップに戻る**
- 大きなリファクタリングは複数のPRに分割する
- シンプル化で動作が変わらないことを必ず検証する
