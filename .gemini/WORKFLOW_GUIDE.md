# 🎯 ワークフロー使い方ガイド

このドキュメントでは、Antigravityのワークフローの使い分けと具体的な使用例を説明します。

---

## 📋 ワークフロー一覧

### モード切替（グローバル）
| コマンド | 用途 | いつ使う？ |
|----------|------|-----------|
| `/dev` | 開発モード | コードを書く・修正する時 |
| `/docs` | ドキュメントモード | 資料・READMEを作成する時 |
| `/research` | リサーチモード | 技術調査・情報収集する時 |
| `/reset` | 基本モードに戻る | モードをクリアしたい時 |
| `/sync-rules` | ルール同期 | Dotfilesのルールを更新した後 |

### セッション管理（プロジェクト）
| コマンド | 用途 | いつ使う？ |
|----------|------|-----------|
| `/session save` | セッション保存 | 作業を終了する時 |
| `/session resume` | セッション再開 | 作業を再開する時 |

### Git・品質管理（プロジェクト）
| コマンド | 用途 | いつ使う？ |
|----------|------|-----------|
| `/git commit` | コミット・プッシュ | 変更を保存・共有する時 |
| `/git rollback` | ロールバック | 変更を取り消したい時 |
| `/verify` | 検証 | コード変更後の確認 |
| `/quality simplify` | シンプル化 | 機能完成後の整理 |
| `/quality refactor` | リファクタリング | コード品質改善 |

### 分析・計画（プロジェクト）
| コマンド | 用途 | いつ使う？ |
|----------|------|-----------|
| `/analyze project` | プロジェクト分析 | 新規参加・全体把握 |
| `/analyze debug` | デバッグ支援 | エラー発生時 |
| `/analyze security` | セキュリティ監査 | リリース前チェック |
| `/plan` | 実装計画 | 大きな機能実装前 |

### 開発・プロジェクト固有
| コマンド | 用途 | いつ使う？ |
|----------|------|-----------|
| `/feature-development` | 機能開発 | 新機能を追加する時 |
| `/sdd` | 仕様駆動開発 | 要件→設計→実装のフロー |
| `/slide-gen` | スライド生成 | 勉強会スライド作成 |

---

## 🎬 シナリオ別 使い方ガイド

### シナリオ1: 朝、作業を再開する

```
ユーザー: /session resume
AI: 前回のセッション状態を読み込みました。
    - 進行中: Copilotテストの実施
    - 次のタスク: TC-B03のテスト
    前回の続きから作業を再開します。何をしますか？

ユーザー: /dev
AI: 開発モードが有効になりました。

ユーザー: TC-B03のテストを実行して
AI: （開発ルールに従ってテスト実施）
```

---

### シナリオ2: 新しい機能を追加する

```
ユーザー: /dev
AI: 開発モードが有効になりました。

ユーザー: /plan
AI: 実装計画を作成します。何を実装しますか？

ユーザー: ユーザー認証機能を追加したい
AI: ## 📋 実装計画
    ### 目標
    ユーザー認証機能の追加
    ### 実装ステップ
    1. 認証用APIの作成
    2. ログインフォームの実装
    ...
    この計画で進めてよろしいですか？

ユーザー: はい
AI: （実装開始）

ユーザー: /verify
AI: ## ✅ 検証結果
    | 項目 | 結果 |
    | ビルド | ✅ |
    | テスト | ✅ |

ユーザー: /git commit
AI: コミットメッセージを入力してください
```

---

### シナリオ3: バグを修正する

```
ユーザー: /dev
AI: 開発モードが有効になりました。

ユーザー: /analyze debug
    エラー: TypeError: Cannot read property 'name' of undefined
AI: ## 🐛 デバッグ分析
    ### 原因の可能性
    1. userオブジェクトがnull/undefined
    2. APIからのレスポンスが空
    ### 確認すべきファイル
    - src/components/UserProfile.tsx
    ...

ユーザー: （修正を実施）

ユーザー: /verify
AI: ✅ すべてのテストがパスしました

ユーザー: /git commit fix: ユーザー名が表示されない問題を修正
```

---

### シナリオ4: コードをきれいにする

```
ユーザー: /dev
AI: 開発モードが有効になりました。

ユーザー: /quality simplify
AI: 変更ファイルを確認します...
    以下の改善を提案します：
    - 重複コードの削除
    - 変数名の改善
    実施しますか？

ユーザー: はい

ユーザー: /verify
AI: ✅ リファクタリング後も動作確認OK
```

---

### シナリオ5: ドキュメントを作成する

```
ユーザー: /docs
AI: ドキュメント作成モードが有効になりました。

ユーザー: READMEを作成して
AI: （ドキュメントルールに従って作成）
    - 階層構造を守る
    - コードブロックに言語指定
    ...
```

---

### シナリオ6: 技術調査をする

```
ユーザー: /research
AI: リサーチモードが有効になりました。

ユーザー: Next.js vs Nuxt.js どちらがいい？
AI: ## 調査結果
    ### 比較分析
    | 観点 | Next.js | Nuxt.js |
    | 言語 | React/TS | Vue/TS |
    | 学習コスト | △ | ◯ |
    ...
    ### 推奨
    既存スキルがReactなら Next.js
```

---

### シナリオ7: 作業を終了する

```
ユーザー: /session save
AI: セッション状態を保存しました。
    - 完了: TC-B03のテスト
    - 次回: TC-B04のテスト
    
ユーザー: /git commit
AI: 変更をコミット・プッシュしました。
    お疲れさまでした！
```

---

### シナリオ8: 間違えたので戻したい

```
ユーザー: /git rollback
AI: 現在の状態:
    最新コミット: abc1234 - feat: 新機能追加
    どこまで戻しますか？
    A. 直前のコミットを取り消し
    B. 作業中の変更を退避

ユーザー: A
AI: ⚠️ git reset --soft HEAD~1 を実行します。よろしいですか？
```

---

## 💡 Tips

### よく使うフロー

**朝のルーティン**
```
/session resume → /dev → 作業開始
```

**夕方のルーティン**
```
/verify → /git commit → /session save
```

**新機能開発**
```
/dev → /plan → 実装 → /verify → /quality simplify → /git commit
```

**バグ修正**
```
/dev → /analyze debug → 修正 → /verify → /git commit
```

---

## ⚠️ 注意事項

1. **コード変更後は必ず `/verify`** - 検証なしで完了としない
2. **大きな変更前は `/plan`** - 計画なしに始めない
3. **作業終了時は `/session save`** - 進捗を記録する
4. **モード切替は適宜** - 作業内容に合わせてモードを切り替える

---

*最終更新: 2026-01-08*
